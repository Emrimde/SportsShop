@model CheckoutViewModel
@{
    ViewBag.Title = "Checkout";
}

<div class="container py-4" style="max-width:1200px;">
    <div class="row">
        <div class="col-md-8">
            <h2 class="mb-3 fw-bold" style="color: #333;">Delivery</h2>
            <p class="text-muted" style="font-size: 0.9rem;">
                Free shipping from $300. If your order is at least $70, shipping can also be discounted.
            </p>

            <div class="mb-4">
                <label for="countrySelect" class="form-label fw-semibold" style="color: #333;">Select Address</label>
                <select class="form-select" id="countrySelect">
                    @if (Model.Addresses.Count == 0)
                    {
                        <option>No addresses saved</option>
                    }
                    else
                    {
                        @foreach (var address in Model.Addresses)
                        {
                            <option>@address.Street</option>
                        }
                    }



                </select>
            </div>

            <div class="mb-4">
                <h5 class="fw-bold" style="color: #333;">Shipping Methods</h5>

                <div class="form-check mb-2">
                    <form asp-action="GetShippingCost">
                        
                        @foreach (Supplier supplier in Model.Suppliers)
                    { 
                            <input onchange="this.form.submit()" class="form-check-input" type="radio" name="supplierId" value="@supplier.Id">
                        @* <input type="hidden" name="supplierId" value="@supplier.Id" /> *@
                        <label class="form-check-label" for="shippingMethod1" style="color: #333;">
                            @supplier.Name
                        </label>
                        <p class="text-muted ms-4" style="font-size: 0.9rem;">Cost: $@supplier.Price</p>
                    }

                    </form>
                </div>

            </div>

            <div class="mb-4">
                <h5 class="fw-bold" style="color: #333;">Payment</h5>

                <div class="form-check mb-2">
                    <input class="form-check-input" type="radio" name="paymentMethod" id="paymentMethod1" checked>
                    <label class="form-check-label" for="paymentMethod1" style="color: #333;">
                        PayPal Express Checkout
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="paymentMethod" id="paymentMethod2">
                    <label class="form-check-label" for="paymentMethod2" style="color: #333;">
                        Credit Card
                    </label>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="border p-3" style="background-color: #f9f9f9; border-radius:4px;">
                <h3 class="fw-bold mb-4" style="color: #333;">Your Cart</h3>

                    @foreach (CartItem cartItem in Model.CartItems)
                    {
                <div class="d-flex justify-content-between align-items-center mb-2">
                        <div><span style="color: #333;">@cartItem.Product.Name</span></div>
                        <span style="color: #333;">$@cartItem.Product.Price</span>
                        <span style="color: #333;">Quantity: @cartItem.Quantity</span>
                </div>
                    }
                <hr>

                <!-- Discount Code -->
                @* <div class="mb-3"> *@
                @*     <label for="discountCode" class="form-label fw-semibold" style="color: #333;">Discount code</label> *@
                @*     <div class="input-group"> *@
                @*         <input type="text" class="form-control" id="discountCode" placeholder="Enter code"> *@
                @*         <button class="btn btn-dark" type="button">Apply</button> *@
                @*     </div> *@
                @* </div> *@

                <div class="d-flex justify-content-between align-items-center">
                    <span style="color: #333;">Subtotal</span>
                    <span style="color: #333;">$@Model.ItemsPrice</span>
                </div>
                <div class="d-flex justify-content-between align-items-center">
                    <span style="color: #333;">Shipping</span>
                    <span style="color: #333;">$@Model.ShippingCost</span>
                </div>
                <hr>

                <div class="d-flex justify-content-between align-items-center mb-3 fw-bold">
                    <span style="color: #333;">Total</span>
                    <span style="color: #333;">$@Model.TotalCost</span>
                </div>

                <button class="btn w-100" style="background-color: #FFC107; color: #333; font-weight:600;">
                    Place Order
                </button>
            </div>
        </div>
    </div>
</div>

